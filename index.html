<!doctype html>
<html class="no-js" lang="">

<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title></title>
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link href="styles/particles.css" type="text/css" rel="stylesheet">
  <link href="styles/layout.css" type="text/css" rel="stylesheet">
  <link href="styles/intro.css" type="text/css" rel="stylesheet">
</head>

<body>

        <article class="intro-container">  
            <section class="title start intro-fade">
                <p>
                <span>
                    Rise of the Phoenix!
                </span>      
                </p>
            </section>
                
            <div class="animation">
                
                <section class="intro intro-fade">
                    A long time ago, in a london borough far,
                    <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; far away.... 
                    <br> <i>click space to skip....</i>
                </section>
                    
                <section class="titles">
                    <div contenteditable="true" spellcheck="false">  
                    <p>
                        lorem ipsum
                    </p>
                
                    <p>
                        During the battle, Rebel
                        spies managed to steal secret
                        plans to the Empire's
                        ultimate weapon, the DEATH
                        STAR, an armored space
                        station with enough power to
                        destroy an entire planet.
                    </p>
                
                    <p>
                        Pursued by the Empire's
                        sinister agents, Princess
                        Leia races home aboard her
                        starship, custodian of the
                        stolen plan that can save
                        her people and restore
                        freedom to the galaxy....
                    </p>
                    </div>
                    </section>
                </div>
        </article>

    <div id='background-container'>
        <object class="overlay" id="phoenix" data="assets/phoenix.svg" type="image/svg+xml" width="8%">
            Your browser doesn't support SVG :(
        </object>
    </div>
    
    <!-- <canvas id="background-canvas"></canvas>
    <canvas id="text-canvas"></canvas>
    <canvas id="game-canvas"></canvas> -->
    
  <!-- <script src="program.js"></script> -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/84/three.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/dat-gui/0.6.2/dat.gui.js"></script>
  <script src="js/lib/snap.svg-min.js"></script>
  <script src="js/particles.js"></script>
  <script src="js/intro.js"></script>
  <script src="js/phoenix.js"></script>
  <script>
  (() => {
        // RequestAnimFrame: a browser API for getting smooth animations
        window.requestAnimFrame = (function () {
            return window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || function (callback) {
                return window.setTimeout(callback, 1000 / 60);
            };
        })();

        window.cancelRequestAnimFrame = (function () {
            return window.cancelAnimationFrame || window.webkitCancelRequestAnimationFrame || window.mozCancelRequestAnimationFrame || window.oCancelRequestAnimationFrame || window.msCancelRequestAnimationFrame || clearTimeout
        })();
  })();
  </script>
  <script>
    (() => {
        let phoenix = null;
        let phoenixSVG = ['phoenix'];
        let phoenixColour = '#0fbca3';
        let phoenixSize = "8s%";

        phoenixSVG.forEach((el,i) => {
                document.getElementById(el).addEventListener('load', (event) => {
                    
                    // todo : update state method, animation loop, dom input for scale
                    console.log(`loaded svg: ${event.target.data}`)
                    let svgDoc = event.target.contentDocument;

                    phoenix = new Phoenix(svgDoc.getElementById("phoenix"), phoenixSize, phoenixColour, phoenixColour);

                    let animate = () => {
                                requestAnimFrame(animate);
                                phoenix.updatePlayerMovement();
                            };
                    
                    animate();
                }, false);
        });
    })();
</script>
</body>

</html>
